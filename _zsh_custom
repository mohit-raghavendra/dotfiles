# Personal ZSH configuration
# This file contains portable config that works across all machines
# Source this from your local ~/.zshrc with: source ~/.zsh_custom

# Fix TERM for SSH sessions when using Ghostty
# Ghostty uses xterm-ghostty which remote servers don't recognize
if [[ -n $SSH_CONNECTION ]] && [[ $TERM == "xterm-ghostty" ]]; then
  export TERM=xterm-256color
fi

# SSH agent persistence
# Keeps SSH keys loaded across terminal sessions (no password re-entry)
if [ ! -S ~/.ssh/ssh_auth_sock ]; then
  eval `ssh-agent`
  ln -sf "$SSH_AUTH_SOCK" ~/.ssh/ssh_auth_sock
fi
export SSH_AUTH_SOCK=~/.ssh/ssh_auth_sock
ssh-add -l > /dev/null || ssh-add

# Arrow key bindings for terminal compatibility
bindkey '\e[A' up-line-or-history
bindkey '\eOA' up-line-or-history
bindkey '\e[B' down-line-or-history
bindkey '\eOB' down-line-or-history

# NVM configuration (Node Version Manager)
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"
[ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"
